<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re-0模擬抽卡機（加倍）tle>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid black; padding: 5px; text-align: center; }
        .highlight { background-color: yellow; }
    </style>
</head>
<body>
    <h2>Draw Simulation Rate Up</h2>
    <label>Number of Players: <input type="number" id="numPlayers" value="1"></label>
    <label>Number of Draws: <input type="number" id="numDraws" value="35"></label>
    <button onclick="runDrawSimulation()">Run Simulation</button>
    <table id="results"></table>
    
    <script>
        function runDrawSimulation() {
            let numPlayers = parseInt(document.getElementById("numPlayers").value) || 1;
            let numDraws = parseInt(document.getElementById("numDraws").value) || 35;
            let resultsTable = document.getElementById("results");
            resultsTable.innerHTML = "";
            
            const monsters = [
                { id: 10855, rate: 0.155 }, { id: 10856, rate: 0.155 }, { id: 10858, rate: 0.155 },
                { id: 10859, rate: 0.155 }, { id: 10860, rate: 0.155 }, { id: 10852, rate: 0.1 },
                { id: 10854, rate: 0.1 }, { id: 10857, rate: 0.025 }
            ];
            
            for (let p = 1; p <= numPlayers; p++) {
                let draws = [];
                for (let i = 0; i < numDraws; i++) {
                    if ((i + 1) % 35 === 0) {
                        draws.push(10857);
                    } else {
                        let rand = Math.random();
                        let cumulative = 0;
                        for (let monster of monsters) {
                            cumulative += monster.rate;
                            if (rand < cumulative) {
                                draws.push(monster.id);
                                break;
                            }
                        }
                    }
                }
                
                let row = resultsTable.insertRow();
                let cell = row.insertCell();
                cell.textContent = `Player ${p}`;
                cell.colSpan = 10;
                
                for (let i = 0; i < draws.length; i += 10) {
                    let row = resultsTable.insertRow();
                    for (let j = 0; j < 10; j++) {
                        let cell = row.insertCell();
                        let id = draws[i + j];
                        if (id) {
                            let img = document.createElement("img");
                            img.src = `https://d1h5mn9kk900cf.cloudfront.net/toswebsites/gallery/icons/${id}.jpg`;
                            img.width = 50;
                            img.height = 50;
                            cell.appendChild(img);
                            if (id === 10857) cell.classList.add("highlight");
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>
